# AI 기반 HTP 검사 분석 시스템

## 1. 프로젝트 개요
### 문제 정의
- HTP(집-나무-사람) 검사는 심리 평가에서 사용되는 투사적 검사 방법 중 하나로, 그림을 그린 방식에 따라 개인의 심리 상태를 해석할 수 있음.
- AI 모델을 활용하여 **HTP 그림에서 감지된 객체의 크기, 위치, 개수, 존재 여부 등을 분석하고 심리적 상태를 평가하는 자동 분석 시스템**을 구축하는 것이 목표.

### 핵심 해결 과제
1. **HTP 그림에서 객체(집, 나무, 사람 등)를 감지하고 분석할 수 있는가?**  
2. **감지된 객체의 크기, 위치, 개수, 존재 여부를 분석하여 심리 평가를 자동화할 수 있는가?**  
3. **HTP 검사에 대한 기존 심리 분석 데이터를 AI와 연계하여 해석을 개선할 수 있는가?**  

---

## 2. 주요 기능 및 분석 방법
### (1) 객체 감지 및 바운딩 박스 정보 처리 (`Main_Box`)
- AI 기반 객체 감지 모델을 활용하여 **집, 나무, 사람 등의 요소를 감지**하고 바운딩 박스 정보를 추출.
- `bbox()` 메서드를 통해 감지된 객체들의 위치(x, y, w, h)와 크기(size)를 정리하여 분석에 활용.

### (2) 감지된 객체를 기반으로 심리 분석 수행 (`Analysis`)
- **HTP 검사 데이터를 기반으로 감정 점수 평가**  
- 감지된 객체 정보를 활용하여 다음과 같은 분석 수행:
  - **크기(size_ratio)**: 특정 객체가 기준보다 크거나 작은 경우 심리적 의미 분석  
  - **위치(locate)**: 객체의 배치(왼쪽, 오른쪽, 아래쪽 등)가 심리에 미치는 영향 분석  
  - **개수(counting)**: 객체의 개수가 특정 기준보다 많거나 적을 경우 해석  
  - **존재 여부(exist)**: 특정 객체가 존재하는지 여부를 판단하여 감정 점수 평가  

### (3) HTP 검사 데이터와 비교하여 최종 분석 (`Base_evaluate`)
- **HTP 검사 심리 데이터(`htp_evaluate.json`)를 로드**하여 감지된 객체들과 비교 분석.
- 분석할 객체 리스트를 생성한 후, **각 객체에 대해 크기, 위치, 개수, 존재 여부 등을 분석하여 감정 점수와 해석을 도출**.
- 결과를 딕셔너리(`private_dict`)에 저장하여 최종 평가.

---

## 3. 주요 클래스 및 역할
### `Main_Box`
- **HTP 검사에서 감지된 객체의 바운딩 박스 정보를 저장하고 관리하는 클래스**
- 바운딩 박스 정보(위치 및 크기)를 JSON 파일 형식으로 정리

### `Analysis`
- **바운딩 박스 정보를 활용하여 심리 분석을 수행하는 클래스**
- 분석 항목:
  - **크기(`size_ratio`)**: 기준 크기와 비교하여 객체가 크거나 작을 경우 심리적 영향 해석
  - **위치(`locate`)**: 객체의 위치(왼쪽, 오른쪽, 아래쪽) 정보 기반 심리 분석
  - **개수(`counting`)**: 객체의 개수 분석을 통해 특정 감정 점수 반환
  - **존재 여부(`exist`)**: 특정 객체의 존재 여부를 평가하여 심리적 분석 수행

### `Base_evaluate`
- **HTP 검사 데이터를 불러와 감지된 객체 정보를 심리적 평가와 비교 분석하는 클래스**
- `htp_evaluate.json` 데이터를 로드하여 심리 분석 결과를 정리
- 감지된 객체가 심리적 특성과 어떤 관계가 있는지 분석 후 최종 결과 반환

---

## 4. 프로젝트 사용 방법
### (1) 데이터 준비
- `htp_evaluate.json` 파일을 프로젝트 디렉토리에 배치
- 분석할 HTP 검사 결과 데이터를 JSON 형식으로 저장

### (2) 객체 감지 및 분석 실행
```python
from analysis_module import Base_evaluate

# 객체 감지 결과 예제
detected_objects = {
    "house": [[0.2, 0.3, 0.4, 0.5, 0.6]],
    "tree": [[0.5, 0.4, 0.3, 0.6, 0.7]],
    "person": [[0.1, 0.2, 0.3, 0.4, 0.5]]
}

# HTP 검사 결과 분석 실행
evaluator = Base_evaluate(result=detected_objects)
analysis_result = evaluator.private_dict

# 분석 결과 출력
print(analysis_result)
