# 연기의 민족 - 청소년 전자담배 구매 경로 분석 및 규제 강화 제안

## 1. 프로젝트 개요
### 문제 정의
- 최근 **청소년의 전자담배 사용 증가**가 사회적 이슈가 되고 있음.
- 공공데이터 및 뉴스 데이터를 활용하여 **청소년 전자담배 구매 경로를 분석하고, 효과적인 규제 방안을 제안하는 것**이 목표.

### 핵심 해결 과제
1. **청소년 전자담배 사용 실태를 데이터로 입증할 수 있는가?**
2. **청소년의 주요 구매 경로를 분석하고, 증가하는 이유를 파악할 수 있는가?**
3. **실효성 있는 규제 방안을 데이터 기반으로 도출할 수 있는가?**

## 2. 팀원 및 역할 분담
- **팀명**: 연기의 민족  
- **한지예**: PPT 제작 및 발표  
- **이장헌**: 전자담배 무인전포점 자료 수집 및 시각화  
- **정재식**: 공공데이터 및 뉴스 데이터 수집, 분석 및 시각화  

---

## 3. 본인이 수행한 작업 및 문제 해결 과정
### (1) 공공데이터 분석을 통한 흡연율 변화 탐색
#### 목표: 국내 흡연율 데이터 분석을 통해 전자담배 사용 증가를 증명
#### 해결 방법
- **질병관리청의 공공데이터 활용**
  - 일반담배 및 전자담배 흡연율 데이터를 `pandas`를 활용해 전처리
- **변화율 분석 (`diff`, `cumsum`)**
  - 흡연율 변화 추이를 계산하여 **전자담배 사용이 증가하고 있음을 데이터로 증명**
- **시각화 (`Matplotlib`, `koreanize_matplotlib`)**
  - 일반담배 흡연율은 감소하는 반면, 전자담배 흡연율은 증가하는 패턴을 한눈에 확인 가능하도록 `bar plot`으로 시각화

**결과:**  
- 일반 담배 사용은 감소하는데 반해 **전자담배 사용이 꾸준히 증가하는 경향을 발견**  
- **연도별 변화율을 계산하여 추세를 보다 명확하게 시각화**  

---

### (2) 뉴스 데이터 크롤링 및 자연어 처리(NLP) 분석
#### 목표: 청소년과 전자담배 관련 키워드를 도출하여 주요 이슈 및 연관성 파악
#### 문제 발생 및 해결 과정
**문제 1: 네이버 뉴스 API 제한으로 인해 데이터 부족**
- 네이버 뉴스 OpenAPI의 호출 제한으로 인해 충분한 뉴스 데이터를 확보할 수 없었음.  
**해결 방법**  
  - **정적 크롤링 (`BeautifulSoup`)** 시도 → 데이터 부족  
  - **동적 크롤링 (`Selenium`)**을 활용하여 다량의 데이터를 수집하는 방식으로 전환  

**문제 2: 뉴스 데이터에서 의미 있는 키워드를 추출하기 어려움**
- 단순 빈도 기반 분석만으로는 주요 이슈 도출이 어려웠음.  
**해결 방법**  
  - **형태소 분석 (`KoNLPy`) 적용**하여 불필요한 조사, 어미 등을 제거  
  - **연관 분석 (`Apiori`) 적용**하여 전자담배 관련 단어들이 함께 등장하는 패턴 분석  

**결과:**  
- `WordCloud` 및 `NetworkX`를 활용하여 **"청소년", "전자담배", "온라인 구매"** 등의 연관성을 시각화  
- **전자담배 구매 경로 중 인터넷 구매의 영향이 높음을 데이터로 증명**  

---

### (3) 청소년 전자담배 구매 경로 분석
#### 목표: 청소년들이 전자담배를 어떤 경로로 구매하는지 파악
#### 문제 발생 및 해결 과정
**문제: 구매 경로에 대한 데이터가 부족하여 세부적인 분석이 어려움**  
- 기존 데이터에서 구매 경로를 직접적으로 나타내는 변수가 많지 않았음.  
**해결 방법**  
  - 여성가족부 데이터를 추가 확보하여 **구매 경로(오프라인 vs 온라인) 변화 추세 분석**  
  - 구매 경로별 비율을 비교한 결과, **온라인 구매 비중이 급격히 증가**하고 있음을 발견  

**결과:**  
- **청소년들이 온라인에서 쉽게 전자담배를 구매할 수 있는 구조적 문제를 발견**  

---

## 4. 데이터 기반 규제 방안 제안
#### 문제점 도출
- **청소년이 온라인에서 손쉽게 전자담배를 구매할 수 있음**  
- 온라인 인증 절차가 단순하여 성인 인증을 우회하는 사례가 많음  

#### 해결책 제안
- **안면 인식을 활용한 이중 보안 절차 도입**  
- 기존 성인 인증 방식과 함께 **생체 인증(얼굴 인식)**을 추가하여 본인 확인 강화  

---

## 5. 이슈 발생 및 해결 경험
### (1) 크롤링 성능 최적화
**문제: Selenium 크롤링 속도가 느려 데이터 수집 시간이 길어짐**  
**해결 방법**  
- **병렬 처리 (`Threading`) 적용하여 크롤링 속도 2배 향상**  
- 필요 없는 동작(스크롤 다운, 대기 시간)을 줄여 최적화  

### (2) NLP 분석에서 데이터 정제 문제
**문제: 분석 결과에 불필요한 단어(예: "기사", "보도")가 포함됨**  
**해결 방법**  
- **불용어 사전 직접 구축**하여 의미 없는 단어 필터링  
- 동의어 통합 및 표제어 추출을 적용하여 분석 정확도 향상  

### (3) 한글 폰트 깨짐 문제 해결
**문제: WordCloud 및 NetworkX 시각화 과정에서 한글 폰트가 깨지는 문제 발생**  
**해결 방법**  
- `matplotlib.font_manager`를 활용하여 **NanumBarunGothic 폰트를 직접 등록 및 적용**  
```python
from matplotlib import font_manager
font_path = "/usr/share/fonts/truetype/nanum/NanumBarunGothicBold.ttf"
font_manager.fontManager.addfont(font_path)
font_name = font_manager.FontProperties(fname=font_path).get_name()
plt.rcParams["font.family"] = font_name
```

---

## 6. 아쉬웠던 점 및 개선 방향
### (1) 심층적인 분석 부족
- **청소년이 구매한 전자담배를 실제로 흡연하는 비율**까지 분석하지 못함.  
**개선 방향**: 추가적인 설문조사 데이터 활용하여 흡연 지속 여부 분석  

### (2) 규제 방안의 실효성 검토 부족
- 안면 인식 도입이 현실적으로 **법적, 기술적으로 실현 가능한지 충분한 검토가 부족**  
**개선 방향**: 법률적 검토 및 기존 생체 인증 기술과의 연계 방안을 추가 연구  

---

## 7. 사용한 기술 및 문제 해결 과정
| 기술 | 사용 이유 및 문제 해결 |
|------|--------------------|
| **Python** | 데이터 분석 및 크롤링 자동화 |
| **Pandas** | 데이터 정제 및 가공 |
| **Jupyter Notebook** | 분석 과정 정리 및 실행 |
| **Selenium** | 동적 크롤링을 통해 OpenAPI 한계 극복 |
| **BeautifulSoup** | 정적 크롤링을 통해 기본 뉴스 데이터 확보 |
| **Matplotlib** | 데이터 시각화 (흡연율 변화 분석) |
| **KoNLPy** | 한글 형태소 분석 (뉴스 키워드 추출) |
| **WordCloud** | 핵심 키워드 시각화 |
| **Apiori** | 연관 분석 (키워드 간 관계 파악) |
| **NumPy** | 데이터 처리 속도 최적화 |
| **NetworkX** | 네트워크 그래프 분석 (전자담배-청소년 관계 시각화) |

---

## 8. 프로젝트 결과 및 기대 효과
- **청소년 전자담배 구매 경로를 데이터 기반으로 분석**  
- **온라인 구매 과정의 취약점 파악 및 보안 강화 방안 제안**  
- **법적, 기술적 검토를 거친 실질적인 규제 방안 추가 연구 필요**  

